---
title: "ETC5512: Assignment 1"
author: "Mey Siv" 
editor: visual
---

```{r setup, include=FALSE}
knitr::opts_chunk$set(echo = TRUE) 
```

## Case Study 1

### Data

The data downloaded from the NSW traffic portal is saved in file `NSW_cyclone_incidents_raw.csv` in the `data` directory.

The processed data is saved in the file `NSW_cyclone_incidents_processed.csv` in the `data` directory.

To get started in read in the raw data that you downloaded directly from the portal.

```{r}

library(here)
library(readr)
# Read in the .csv file, skipping the first n lines
# Read in my raw data here
NSW_cyclone_raw <- read_csv("data/NSW_cyclone_incidents_raw.csv", skip = 7)

NSW_cyclone_raw

```

### Documenting your workflow

**Steps to download the data**

Write the steps here you took to download the raw data here.

1.  Navigate to the NSW Government Portal to access the data using this link: https://www.livetraffic.com/historical-data-search
2.  Under the "Date range" option, select dates between January 01 and March 30 of 2025, and then click "Apply"
3.  In the "Enter a location" field, type "New St, North Lismore" and press Enter
4.  Under "Radius", move the slider to the right until it reaches 47 km.
5.  Click "Search"
6.  Once the results appear, click on "Download CSV"
7.  The file will be downloaded onto your laptop.

**Steps to process the data**

Write the steps here you took to process the raw data. The final step should be saving the processed data.

1.  Processing only the necssary variables for the ex cyclone data set in NSW

```{r}

# First processing step

library(tidyverse)
library(dplyr)

# removes the variables that are not important in the dataset
NSW_cyclone_variables <- NSW_cyclone_raw %>% select(-c(ID, Version,`Date (Planned Incidents)`, `Traffic conditions`,Diversions, Queue_length, Attending, `Public transport`,`Website links`, `Traffic arrangement`,Other_advice,
                    `Download maps`,`Reduced speed limit`,`Expected delay`,`Organisation name`,
                  `Organisation email`,`Organisation contact`,`Organisation website`, 
                  `Geometry collection`, ...28)) 

NSW_cyclone_variables

```

2.  Modifying the column type and tidy up the dataset

```{r}
# Second processing step

# changing the type of column from character to date type
library(lubridate)
library(dplyr)

NSW_cyclone <- NSW_cyclone_variables %>% 
  mutate(Created = sub("^[A-Za-z]{3} ", "", Created),  # Remove weekday
         Created = as.POSIXct(Created, format = "%d %b %Y %I:%M%p", tz = "UTC")) |> 
  mutate(Ended = sub("^[A-Za-z]{3} ", "", Ended),  # Remove weekday
         Ended = as.POSIXct(Ended, format = "%d %b %Y %I:%M%p", tz = "UTC")) |>
  mutate(Updated = sub("^[A-Za-z]{3} ", "", Updated),  # Remove weekday
         Updated = as.POSIXct(Updated, format = "%d %b %Y %I:%M%p", tz = "UTC"))

#rename the columns
NSW_cyclone <- NSW_cyclone |> 
  rename(Road_condition = Title, Longitude_Latitude = Coordinates)

NSW_cyclone
```

3.  Only processing the data that is in the year of 2025 and remove any duplicate values

```{r}
# Thrid processing step
# selecting only the year 2025
NSW_cyclone_2025 <- NSW_cyclone %>%
  filter(year(Created) == 2025)

# remove duplicate value 
NSW_cyclone_2025 <- unique(NSW_cyclone_2025)

NSW_cyclone_2025

```

4.  Only processing the road conditions that are related to the Cyclone event in March 2025

```{r}
# Fourth processing step
# selecting only the important variables in the road condition column

NSW_cyclone_2025 <- NSW_cyclone_2025 %>%
  filter(Road_condition %in% c("ADVERSE WEATHER", 
                               "ADVERSE WEATHER Cyclone", 
                               "ADVERSE WEATHER Water over road", 
                               "CHANGED TRAFFIC CONDITIONS", 
                               "CHANGED TRAFFIC CONDITIONS Road Closure", 
                               "EMERGENCY ROADWORK",
                               "FLOODING",  
                               "HAZARD Fallen tree", 
                               "HAZARD Landslide",  
                               "HAZARD Road damage",  
                               "HAZARD Water over road",  
                               "HAZARD Wires down"))

NSW_cyclone_2025
```

5.  Save out the processed data

```{r}
# Save my processed data
NSW_cyclone_2025_file_name = "NSW_cyclone_incidents_processed.csv" 
write_csv(NSW_cyclone_2025, file = NSW_cyclone_2025_file_name)

```

### Documenting your Data

Here is where you provide details of:

-   Meta data

This dataset contains information about ex-Tropical Cyclone events that occurred within a 47km radius of North Lismore, New South Walses, Australia. Reports and recent news have documented significant cyclone activity in North NSW around March 2025 (Leach et al., 2017). To capture the relevent impact on raods, the dataset covers the period from January 1, 2025, to March 24, 2025, in the Lismore area, where most of the affected areas are surrounded by land in the North NSW. Not only that, collecting data from before the cyclone event provides insight into pre-existing road conditions, which may have contributed to or worsened the impact during the cyclone. The dataset includes key variables such as road condition, location, timestamps (Created, Ended and Updated) and geographical coordinates (Longitude_Latitude) to directly identify affected roads accurately. Additionally, the "Impacted" and "Advice" variables provide an overview of how the Cycone affected residential roads in Lismore.

-   Description of all variables (columns)

1.  Road_condition : Describes the status of the road (i.e flooding, adverse weather)
2.  location : the area or landmark where the impact was observed
3.  Created : the date and time when the event was frist reported
4.  Ended : the date and time when the event was resolved or no longer relevent
5.  Updated : the date and time of the most recent update to the event record
6.  Langitude_Latitude : the exact geographic coordinate of the observation in decimal degrees
7.  Impacted : the extent of disruption caused by the event on the road
8.  Advice : recommendations or warnings issued to the public regarding the road status

-   Description of all variables (Road condition)

The Road_condition column has been filtered to capture only condition directly related to the impacts of the ex-Tropical event in March 2025. The selection criteria focus on conditions that affected road accessibility and safety during the cyclone event, including adverse weather, adverse weather Cyclone, adverse weather water over road, changed traffic conditions, changed traffic conditions road closure, emergency roadwork, flooding, hazard fallen tree, hazard landside, hazard road damage, hazard water over road and hazard wires down.

-   License information

The dataset is sourced from the NSW Government Portal, which operates under the Creative Commons Attribution 4.0 License. This license allows users to share and adapt the material for any purpose, provided that appropriate credit is given to the State of New South Wales.\
More detailed can be found [here](https://www.transport.nsw.gov.au/about-us/legal).

-   Information on data collection

The data was collected from the NSW Government Portal and complied to create a structured dataset to be used by other team members at the Victorian Department of Transport and Planning. The dateset covers the period from January 1, 2025, to March 24, 2025.

-   Limitations

1.  Data completeness: not all observations may include complete information for every variable, which could affect analyses such as time and date of the events
2.  Lack of terminology glossary: the absence of a terminology glossary in the NSW Government Portal makes it difficult for users to precisely interpret some terms used in the dataset.

-   Population and sample information

Population covers all roads in NSW that were affected by ex-Tropical Cyclone events in 2025. Sample covers a subset of roads within a 47 km radius of North Lismore that were most impacted during Janary 01, 2025 to March 24, 2025.

## Case Study 2

### Data

The data downloaded for this case study is downloaded directly from the API and does not need to be locally stored as your steps should be reproducible below.

The processed data is saved in the file `NSW_kangaroo_sightings_processed.csv` in the `data` directory.

### Documenting your workflow

**Steps to download the data**

Write the steps here you took to download the raw data from the Australian Living Atlas API in R.

1.  Using the "galah_config()" function from the "galah" package to configure access to the Australian Living Atlas. In the function, provide a student email to authenticate and set "download_reason_id = 10" to indicate that the data is being downloaded for study or research purposes. Lastly enable "verbose = TRUE" to receive detailed messages about the request.

```{r}
# First download step
library(galah)


galah_config(email = "msiv0006@student.monash.edu",
             download_reason_id = 10, 
             verbose = TRUE)

```

2.  Fliters the raw date to inlcude occurrences of only 3 species : Red Kangaroo(Macropus rufus), Eastern Grey Kangaroo(Macropus giganteus) and Western Grey Kangaroo(Macropus fuliginosus)

```{r}
# Second download step

# filter 
kangaroo_raw <- galah_call() |> 
  galah_identify("Macropus rufus", "Macropus giganteus", "Macropus fuliginosus") |>
  atlas_occurrences()

```

**Steps to process the data**

Write the steps here you took to process the raw data. The final step should be saving the processed data.

1.  select the year 2022 to 2024 to process the raw data

```{r}
# First processing step
library(lubridate)
library(dplyr)

kangaroo_2022_2024 <- kangaroo_raw %>%
  filter(year(eventDate) %in% c(2022, 2024))


```

2.  Tidy up the data (keeping only necessary variables and renaming column)

```{r}
# Second processing step

kangaroo_2022_2024 <- kangaroo_2022_2024 |> 
  rename(longitude = decimalLongitude,
         latitude = decimalLatitude) |>
  mutate(eventDate = as.Date(eventDate)) |> 
  select(-c(recordID, taxonConceptID, dataResourceName))
                                          
kangaroo_2022_2024

```

3.  select data within a 100km radius surrounding the Dubbo region of NSW (latitude of -32.256943 and longtitude of 148.601105)

```{r}
# third processing step

# Define latitude and longitude for Dubbo city in NSW
dubbo_lat <- -32.256943
dubbo_lon <- 148.601105

# Define a range (one degree = 100km)
range <- 1

# Filter dataset for points near Dubbo
Kangaroo_Dubbo <- kangaroo_2022_2024 %>%
  filter(latitude >= (dubbo_lat - range) & latitude <= (dubbo_lat + range) & 
         longitude >= (dubbo_lon - range) & longitude <= (dubbo_lon + range))

# View results
print(Kangaroo_Dubbo)


```

4.  Save out the processed data

```{r}
# Save out your data
Kangaroo_Dubbo_file_name = "NSW_kangaroo_sightings_processed.csv" 
write_csv(Kangaroo_Dubbo, file = Kangaroo_Dubbo_file_name)
```

### Documenting your Data

Here is where you provide details of:

-   Meta data

This dataset contains observations of three kangaroo species - Red Kangaroo(Macropus rufus), Eastern Grey Kangaroo(Macropus giganteus) and Western Grey Kangaroo(Macropus fuliginosus), within a 100km radius of Dubbo, New South Walses, Australia. Dubbo has been identified as NSW's leading hotpot for animal collisions, with kangaroos being the primary species involved ("Animal collisions jump," 2024). From the DCCEEW website, Red Kangaroo, Eastern Grey Kangaroo, and Western Grey Kangaroo are the most surveyed populations in 2023 (kangaroo-statistics, n.d). The data spans from January 1, 2022, to December 31, 2024, capturing observations across different seasons to account for variations due to factors such as drought or habitat changes. In addition, focusing on the Dubbo region and its surroundings ensures coverage of areas where drivers are at heightened risk of kangaroo collisions. The dataset includes key variables such as scientific name, latitude, longitude, event date, and occurrence status, which are directly relevant in providing specific, meaningful information about where, when, and which kangaroo species are observed in the Dubbo region.

-   Description of all variables (columns)

1.  scientificName : scientific name of the observed kangaroo spcies
2.  latitude : the geographic coordinate of the observation in decimal degrees (north-south)
3.  longitude : the geographic coordinate of the observation in decimal degrees (east-west)
4.  eventDate : date when the observation was recorded
5.  occurrenceStatus : indicates the presence or absence of the species at the specific location and date

-   License information

The data was sourced from the Atlas of Living Australia (ALA) is subject to the terms and conditions specified by the ALA and may include licenses such as Creative Commons. Users should review the specific Data Provider Terms associated with each dataset to ensure compliance with usage rights. More information can be found [here](https://www.ala.org.au/terms-of-use/#cy).

-   Information on data collection

The data was collected using the Atlas of Living Australia's API, focusing on observations recorded between 2022 and 2024 within the Duboo region. This timeframe and geographic focus were chosen to provide relevant data for analysing areas where drivers face increased risks of kangaroo collisions.

-   Limitations

1.  Scientific Nomenclature: accurate data retrieval requires using the correct scientific names of species. Example, searching for "red kangaroo" may yield incomplete results compared to using its scentisfic name, Osphranter rufus or Macropus rufus.
2.  Observation Bias: The dataset relies on observations, which may be influenced by factors such as observer effort and accessibility, potentially leading to spatial or temporal biases.

-   Population and sample information

The population would be all the kangaroo populations across various hotspots in New South Walse, covering both regional and rural areas where animals collisions are prevalent. The sample would be the top three specified kangaroo species within a 100 km radius of Dubbo, NSW, recorded between 2022 and 2024.

### Citations

Animal collisions jump 22% as AAMI urges drivers to stop ignoring wildlife signs. (2024). Suncorp. https://www.suncorpgroup.com.au/news/news/animal-collisions-2024

Maddison Leach, Josh Hohne, Jorge Branco. (2025, March 8). When and where will cyclone Alfred make landfall? What we know about the storm's current trajectory. 9News - Latest news and headlines from Australia and the world. https://www.9news.com.au/national/tropical-cyclone-alfred-predicted-path-landfall-map-explainer/6d1cebd4-eccb-46d0-9a88-6118d26e574c

kangaroo-statistics-states. (n.d.). DCCEEW. https://www.dcceew.gov.au/sites/default/files/documents/kangaroo-statistics-states-2024.pdf

Atlas of Living Australia website at http://www.ala.org.au. Accessed 8 June 2022. For data downloaded from the ALA a DOI is created, an example of how to cite a DOI is: Atlas of Living Australia occurrence download at https://doi.org/10.26197/5d7f2348165a0. Accessed 8 June 2022.

Historical data search. (n.d.). Live Traffic NSW. https://www.livetraffic.com/historical-data-search

### citation("tidyverse")

Wickham H, Averick M, Bryan J, Chang W, McGowan LD, François R, Grolemund G, Hayes A, Henry L, Hester J, Kuhn M, Pedersen TL, Miller E, Bache SM, Müller K, Ooms J, Robinson D, Seidel DP, Spinu V, Takahashi K, Vaughan D, Wilke C, Woo K, Yutani H (2019). “Welcome to the tidyverse.” *Journal of Open Source Software*, *4*(43), 1686. doi:10.21105/joss.01686 <https://doi.org/10.21105/joss.01686>.

Westgate M, Kellie D, Stevenson M, Newman P (2025). *galah: Biodiversity Data from the GBIF Node Network*. R package version 2.1.1, <https://CRAN.R-project.org/package=galah>.

### AI acknowledgment

I have used Chatgpt to help me generating R code, understanding the assignment and checking my grammar. The link to my queries can be found [here](https://chatgpt.com/share/67eb50fd-5c90-8003-a292-94bb302b7f36).
